#!/usr/bin/perl

$json = "/home/larsi/src/heddle/client/groups.js";

open(ACTIVE, "/home/larsi/src/heddle/data/gmane-active") || die;
open(JSON, ">$json.tmp") || die;

print JSON "var groups = new Array(";

$first = 1;
while (<ACTIVE>) {
    next unless /^gwene/;
    s/^gwene.//;
    ($group) = split;
    if (! $first) {
	print JSON ",";
    }
    $first = 0;
    print JSON "'$group'";
}

print JSON ");";

close JSON;
rename "$json.tmp", $json;
